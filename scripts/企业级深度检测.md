一、基础组件只安装一次
模块	安装频率	企业级检测
Kubernetes 集群	初期搭建一次	- Control Plane 健康
- Node 状态
- API Server / Controller / Scheduler
- etcd 状态
KubeEdge	初期部署一次	- EdgeCore 与 CloudCore 连接
- 节点在线状态
- Pod/EdgePod 分发状态
- 网络连通性
ArgoCD	初期部署一次	- Server / Repo / Application 状态
- GitOps 同步状态
- Pod 就绪
- 服务端口可访问
PostgreSQL	初期部署一次	- Pod 就绪
- DB 连接正常
- PVC 存储可写
- 自动备份可用（可选）
Redis（单实例）	初期部署一次	- Pod 就绪
- 端口连通
- 数据可读写

⚠️ 这些基础组件安装一次，后续不需要重复安装
后续业务组件（n8n / Dify / Worker / Edge Agent）全部通过 ArgoCD Application 管理。

二、深度检测要点

你可以写一个企业级健康检测脚本，像你之前的 KubeEdge 健康检查那样：

1️⃣ Kubernetes 集群检测

Node 状态：Ready / NotReady

Pod 状态：Running / CrashLoopBackOff

核心组件：kube-apiserver, kube-scheduler, kube-controller-manager, etcd

2️⃣ KubeEdge 检测

EdgeCore 是否在线

节点数量与状态

Pod 分发成功

网络 TCP / ICMP 可达

3️⃣ ArgoCD 检测

Server / Repo Server Pod 就绪

ArgoCD 应用同步状态

Web 端口访问

初始管理员密码可获取

4️⃣ PostgreSQL / Redis 检测

Pod 状态 Running

PVC 可写

数据库端口连通

简单读写测试

三、企业级策略

安装一次，健康检测持续

基础组件稳定后，不再频繁改动

可以用 CronJob / Prometheus / Grafana 持续监控

业务组件通过 GitOps 管理

n8n / Dify / Worker / Edge Agent 都由 ArgoCD Application 部署

更新直接 commit → ArgoCD 自动同步

避免重复手工安装

备份和恢复策略

PostgreSQL PVC + 定时备份

Redis 如果未来使用队列模式，也需要备份

总结一句话：

基础设施（K8s + KubeEdge + ArgoCD + PostgreSQL + Redis）——安装一次 + 深度健康监控
业务应用（n8n 等）——全部通过 ArgoCD GitOps 管理
